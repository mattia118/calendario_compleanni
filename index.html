<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendario Scout CB4</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">
  <style>
    /* Tutti gli stili sono invariati: non ripetuti qui per brevità */
    /* ... puoi incollare qui il tuo style attuale ... */
  </style>
</head>
<body>
  <header class="header-top">
    <div class="logo-gruppo">⛺ GRUPPO SCOUT CB4</div>
    <div class="scout-icon">⚜️</div>
  </header>

  <div id="countdown"></div>
  <div id="benvenuto"></div>
  <h1>Calendario Compleanni Scout</h1>
  <p><strong>Realizzato da Mattia Spensieri</strong></p>

  <div class="mese-container">
    <img src="ChatGPT Image 26 mag 2025, 21_03_29.png" alt="Icona sinistra" />
    <div id="mese-titolo"></div>
    <img src="ChatGPT Image 26 mag 2025, 21_06_01.png" alt="Icona destra" />
  </div>

  <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
    <button onclick="window.print()">🖨️ Scarica calendario in PDF</button>
    <button onclick="document.body.classList.toggle('night')">🌗 Cambia tema manualmente</button>
  </div>

  <div class="buttons">
    <button onclick="cambiaMese(-1)">⬅️⬅️ <strong>Mese Precedente</strong></button>
    <button onclick="cambiaMese(1)"><strong>Mese Successivo</strong> ➡️➡️</button>
    <button onclick="tornaAdOggi()">🔄 <strong>Oggi</strong></button>
  </div>

  <div class="calendar" id="calendar" style="min-height: 320px; border: 2px dashed red;"></div>

  <div class="extra-buttons">
    <p>🎯 Clicca qui per scoprire di più:</p>
    <button onclick="window.location.href='storia.html'">📖 La nostra storia</button>
    <button onclick="window.location.href='quiz.html'">🧠 Quiz scout</button>
  </div>

  <div class="leggi-scout">
    <h2>⚜️ Le Leggi Scout</h2>
    <ol>
      <li>Lo scout considera la sua onorevole parola più sacra di un giuramento.</li>
      <li>Lo scout è leale verso la sua patria, i suoi genitori, i suoi capi e i suoi subordinati.</li>
      <li>Lo scout è utile agli altri e compie ogni giorno una buona azione.</li>
      <li>Lo scout è amico di tutti e fratello di ogni altro scout.</li>
      <li>Lo scout è cortese e rispetta gli altri.</li>
      <li>Lo scout vede nella natura l'opera di Dio e la protegge con amore.</li>
      <li>Lo scout ubbidisce prontamente e volentieri senza discutere.</li>
      <li>Lo scout è laborioso ed economo.</li>
      <li>Lo scout è coraggioso e sopporta con serenità ogni difficoltà.</li>
      <li>Lo scout è puro nei pensieri, nelle parole e nelle azioni.</li>
    </ol>
  </div>

  <div style="margin: 30px 0;">
    <img src="Screenshot 2025-05-26 alle 17.29.06.png" alt="Foto di gruppo scout" style="max-width: 100%; border-radius: 12px;" />
  </div>

  <div id="fraseScout" style="margin: 30px 0 10px; font-style: italic; color: #33691e; text-align: center;"></div>

  <footer>
    <p><strong>Realizzato da Mattia Spensieri</strong></p>
    <p>Email: <a href="mailto:mattia.spensieri@gmail.com">mattia.spensieri@gmail.com</a></p>
    <p>Cell: 351 2543043</p>
    <p style="margin-top: 10px; font-size: 12px; opacity: 0.6;">Scout CB4 - Tutti i diritti riservati</p>
    <div id="orologioScout" style="margin-top: 20px; font-size: 1.1em; font-weight: bold; color: #1b5e20;"></div>
  </footer>

  <audio autoplay loop>
    <source src="Scouting for Boys - Canto scout con testo e accordi.m4a" type="audio/mp4">
    Il tuo browser non supporta l'audio.
  </audio>

  <script>
    window.onload = function () {
      const compleanni = { '06-11': 'Mattia' };

      let dataVisualizzata = new Date();

      function creaCalendario(mese, anno) {
        const container = document.getElementById("calendar");
        container.innerHTML = "";

        const giorniSettimana = ["Lun", "Mar", "Mer", "Gio", "Ven", "Sab", "Dom"];
        giorniSettimana.forEach(g => {
          const d = document.createElement("div");
          d.className = "day-name";
          d.textContent = g;
          container.appendChild(d);
        });

        document.getElementById("mese-titolo").textContent = 
          `${["Gennaio", "Febbraio", "Marzo", "Aprile", "Maggio", "Giugno", "Luglio", "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre"][mese]} ${anno}`;

        const primo = new Date(anno, mese, 1);
        let start = (primo.getDay() + 6) % 7;

        for (let i = 0; i < start; i++) {
          const vuoto = document.createElement("div");
          vuoto.className = "day empty";
          container.appendChild(vuoto);
        }

        const giorniTotali = new Date(anno, mese + 1, 0).getDate();
        for (let g = 1; g <= giorniTotali; g++) {
          const giorno = document.createElement("div");
          giorno.className = "day";
          giorno.textContent = g;

          const key = `${String(mese + 1).padStart(2, '0')}-${String(g).padStart(2, '0')}`;
          if (compleanni[key]) giorno.classList.add("birthday");

          giorno.onclick = () => {
            giorno.classList.add("clicked");
            setTimeout(() => giorno.classList.remove("clicked"), 300);
            alert(compleanni[key] ? `🎉 Oggi è il compleanno di ${compleanni[key]}!` : "📅 Oggi non è il compleanno di nessuno.");
          };

          container.appendChild(giorno);
        }
      }

      function cambiaMese(delta) {
        dataVisualizzata.setMonth(dataVisualizzata.getMonth() + delta);
        creaCalendario(dataVisualizzata.getMonth(), dataVisualizzata.getFullYear());
      }

      function tornaAdOggi() {
        dataVisualizzata = new Date();
        creaCalendario(dataVisualizzata.getMonth(), dataVisualizzata.getFullYear());
      }

      function aggiornaTema() {
        const ora = new Date().getHours();
        document.body.classList.toggle("night", ora < 6 || ora > 19);
      }

      function aggiornaCountdown() {
        const oggi = new Date();
        const compleanniOrdinati = Object.keys(compleanni).sort();
        let prossimo = null;
        let minGiorni = Infinity;

        compleanniOrdinati.forEach(key => {
          const [mese, giorno] = key.split('-').map(Number);
          let dataCompleanno = new Date(oggi.getFullYear(), mese - 1, giorno);
          if (dataCompleanno < oggi) dataCompleanno.setFullYear(oggi.getFullYear() + 1);
          const diff = Math.ceil((dataCompleanno - oggi) / (1000 * 60 * 60 * 24));
          if (diff < minGiorni) {
            minGiorni = diff;
            prossimo = key;
          }
        });

        const el = document.getElementById("countdown");
        el.textContent = prossimo
          ? `🎉 Mancano ${minGiorni} giorni al prossimo compleanno: ${compleanni[prossimo]}`
          : "Nessun compleanno registrato.";
      }

      setInterval(() => {
        const ora = new Date();
        document.getElementById('orologioScout').textContent =
          `🕒 Ora attuale: ${ora.getHours().toString().padStart(2, '0')}:${ora.getMinutes().toString().padStart(2, '0')}:${ora.getSeconds().toString().padStart(2, '0')}`;
      }, 1000);

      const frasi = [
        '“Lascia il mondo un po\' migliore di come lo hai trovato.” – B.-P.',
        '“Sii il cambiamento che vuoi vedere nel mondo.”',
        '“Un sorriso è la chiave che apre molti cuori.”',
        '“La felicità non viene dal possedere ma dal dare.”',
        '“La vera via per essere felici è rendere felici gli altri.”'
      ];
      document.getElementById("fraseScout").textContent =
        frasi[Math.floor(Math.random() * frasi.length)];

      let nomeScout = localStorage.getItem('nomeScout') || prompt("Come ti chiami?");
      localStorage.setItem('nomeScout', nomeScout);
      document.getElementById('benvenuto').textContent = `👋 Benvenuto, ${nomeScout}!`;

      aggiornaTema();
      aggiornaCountdown();
      tornaAdOggi();

      window.cambiaMese = cambiaMese;
      window.tornaAdOggi = tornaAdOggi;
    };
  </script>
</body>
</html>
