<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Calendario Compleanni Scout</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
      background-color: #f2f2f2;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    #mese-titolo {
      text-align: center;
      font-size: 1.5em;
      margin-bottom: 10px;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      max-width: 700px;
      margin: 0 auto 30px auto;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .day-name, .day {
      text-align: center;
      height: 80px;
      border: 1px solid #ddd;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .day-name {
      font-weight: bold;
      color: #666;
      background-color: #fafafa;
    }

    .day {
      cursor: pointer;
      background-color: #fff;
      position: relative;
    }

    .day:hover {
      background-color: #e0f0ff;
    }

    .day.empty {
      background-color: #f9f9f9;
      cursor: default;
    }

    .event-dot {
      width: 8px;
      height: 8px;
      background-color: red;
      border-radius: 50%;
      position: absolute;
      bottom: 5px;
      left: 5px;
    }

    .buttons {
      text-align: center;
      margin-bottom: 15px;
    }

    .buttons button {
      padding: 8px 12px;
      margin: 0 5px;
      background-color: #007aff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .popup, .overlay {
      display: none;
    }

    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 5;
    }

    .popup {
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      z-index: 10;
      width: 300px;
      text-align: center;
    }

    .close-btn {
      margin-top: 10px;
      background-color: #007aff;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>üìÖ Calendario Compleanni Scout</h1>
  <div id="mese-titolo"></div>

  <div class="buttons">
    <button onclick="cambiaMese(-1)">‚¨ÖÔ∏è Indietro</button>
    <button onclick="cambiaMese(1)">Avanti ‚û°Ô∏è</button>
  </div>

  <div class="calendar" id="calendar"></div>

  <div class="overlay" id="overlay" onclick="chiudiPopup()"></div>
  <div class="popup" id="popup">
    <h3 id="popup-title"></h3>
    <p id="popup-text"></p>
    <button class="close-btn" onclick="chiudiPopup()">Chiudi</button>
  </div>

  <script>
    const mesi = [
      "Gennaio", "Febbraio", "Marzo", "Aprile", "Maggio", "Giugno", "Luglio",
      "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre"
    ];

    let meseCorrente = 4; // Maggio (0-based)
    let annoCorrente = 2025;

    const compleanni = {
      "2025-05-08": "üéÇ Luca Rossi",
      "2025-06-15": "üéâ Giulia Bianchi",
      "2025-07-01": "üéä Marco Verdi",
      "2025-12-24": "üéÑ Anna Neri",
      "2026-03-10": "üéà Davide Gialli",
      "2026-07-20": "üéÅ Elisa Marrone"
    };

    function creaCalendario(mese, anno) {
      const container = document.getElementById("calendar");
      container.innerHTML = "";

      document.getElementById("mese-titolo").textContent = `${mesi[mese]} ${anno}`;

      const giorniSettimana = ["Lun", "Mar", "Mer", "Gio", "Ven", "Sab", "Dom"];
      giorniSettimana.forEach(g => {
        const d = document.createElement("div");
        d.className = "day-name";
        d.textContent = g;
        container.appendChild(d);
      });

      const primoGiorno = new Date(anno, mese, 1);
      let inizio = (primoGiorno.getDay() + 6) % 7;

      for (let i = 0; i < inizio; i++) {
        const vuoto = document.createElement("div");
        vuoto.className = "day empty";
        container.appendChild(vuoto);
      }

      const giorniTotali = new Date(anno, mese + 1, 0).getDate();

      for (let g = 1; g <= giorniTotali; g++) {
        const dataStr = `${anno}-${String(mese+1).padStart(2, '0')}-${String(g).padStart(2, '0')}`;
        const div = document.createElement("div");
        div.className = "day";
        div.textContent = g;

        if (compleanni[dataStr]) {
          const dot = document.createElement("div");
          dot.className = "event-dot";
          div.appendChild(dot);
        }

        div.onclick = () => mostraCompleanno(dataStr);
        container.appendChild(div);
      }

      // Caselle vuote finali per completare la riga (fino a 42 celle totali)
      const celleTotali = container.children.length;
      const celleDaAggiungere = 49 - celleTotali; // 7 giorni/settimana * 6 righe + 7 intestazioni

      for (let i = 0; i < celleDaAggiungere; i++) {
        const vuoto = document.createElement("div");
        vuoto.className = "day empty";
        container.appendChild(vuoto);
      }
    }

    function mostraCompleanno(data) {
      const testo = compleanni[data] || "Nessun compleanno oggi.";
      document.getElementById("popup-title").innerText = data;
      document.getElementById("popup-text").innerText = testo;
      document.getElementById("popup").style.display = "block";
      document.getElementById("overlay").style.display = "block";
    }

    function chiudiPopup() {
      document.getElementById("popup").style.display = "none";
      document.getElementById("overlay").style.display = "none";
    }

    function cambiaMese(delta) {
      meseCorrente += delta;
      if (meseCorrente < 0) {
        meseCorrente = 11;
        annoCorrente--;
      } else if (meseCorrente > 11) {
        meseCorrente = 0;
        annoCorrente++;
      }

      // Limiti da Maggio 2025 a Luglio 2026
      if (annoCorrente < 2025 || (annoCorrente === 2025 && meseCorrente < 4) ||
          annoCorrente > 2026 || (annoCorrente === 2026 && meseCorrente > 6)) {
        alert("Intervallo valido: Maggio 2025 - Luglio 2026");
        if (delta > 0) {
          meseCorrente -= 1;
          if (meseCorrente < 0) { meseCorrente = 11; annoCorrente--; }
        } else {
          meseCorrente += 1;
          if (meseCorrente > 11) { meseCorrente = 0; annoCorrente++; }
        }
        return;
      }

      creaCalendario(meseCorrente, annoCorrente);
    }

    creaCalendario(meseCorrente, annoCorrente);
  </script>

</body>
</html>
